<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>Summary of changes in STIR release 6.3</title>
  </head>

  <body>
    <h1>Summary of changes in STIR release 6.3</h1>


<h2>Overall summary</h2>


<h2>Patch release info</h2>


<h2> Summary for end users (also to be read by developers)</h2>


<h3>New functionality</h3>
<ul>
  <li>
    The analytic Spline Reconstruction Technique (SRT) algorithm has been added in 2 different versions: for PET
    (inverting the 2D Radon transform) and for SPECT (inverting the 2D attenuated Radon transform). The latter
    allows quantitatively correct analytic reconstruction of SPECT data (after scatter correction).

    The reference for the implemented algorithms is:<br>
    Fokas, A. S., A. Iserles, and V. Marinakis.
    <cite>Reconstruction algorithm for single photon emission computed tomography and its numerical implementation.</cite>
    Journal of the Royal Society Interface* 3.6 (2006): 45-54.
    <br>
    The reference for the implementation is:<br>
    Dimitra Kyriakopoulou, <cite>Analytical and Numerical Aspects of Tomography</cite>, UCL PhD thesis, (not yet publically accessible)
    <br>
    <a href=https://github.com/UCL/STIR/pull/1420>PR #1420</a>
  </li>
  <li>
    <code>ScatterSimulation</code> can now downsample the scanner transaxially (crystals per ring) for <code>BlocksOnCylindrical</code>,
    scanners, which speeds up <code>ScatterEstimation</code> considerably. By default, downsampling the detectors per reading
    is disabled for backwards compatibility.<br>
    <a href=https://github.com/UCL/STIR/pull/1291>PR #1291</a>
  </li>
  <li>
    Data from GE Discovery MI systems in RDF9 should now be readable. TOF information on these scanners has also been added.
    However, projection data is currently still always returned as non-TOF (but list-mode data is read as TOF).<br>
    <a href=https://github.com/UCL/STIR/pull/1503>PR #1503</a>
  </li>
  <li>
    <tt>stir_timings</tt> has now an extra option to parse a par-file for a projector-pair.
  </li>
  <li>
    Added the ability to set a forward projector for mask projection in the <code>ScatterEstimation</code> class.<br>
    <a href=https://github.com/UCL/STIR/pull/1530>PR #1530</a>
  </li>
  <li>
    Duration in sinogram interfile/exam_info obtained from <tt>lm_to_projdata</tt> has the correct value if we unlist all the events. This is not true for ROOT files<br>
    <a href=https://github.com/UCL/STIR/pull/1519>PR #1519</a>
  </li>
</ul>


<h3>Changed functionality</h3>
    <ul>
      <li>
        Default ECAT scanner configurations updated to use a negative intrinsic tilt.
      </li>
    </ul>

<h3>Bug fixes</h3>
    <ul>
        <li>
            Fixed a bug in the scatter estimation code (introduced in release 5.1.0) if input data is 3D and "cylindrical" (there was no bug for "blocksoncylindrical" data).
            The scatter estimation runs on data constructed via SSRB. However, the attenuation correction factors were incorrectly obtained with adding of oblique segments (as opposed to averaging).
            This resulted in intermediate images that had the wrong attenuation correction which were approximately num_segments times larger. This was compensated by the tail-fitting, but resulted in unexpected scale factors (scale factors were around 1/num_segments times what was expected).
            This means that if you used the "min/max scale factor" feature in the scatter estimate, you will have to adjust your threshold values. Expected scatter tail-fitting scale factors should now be restored to ~1-1.5 (depending on the amount of multiple and out-of-FOV scatter).
            See <a href="https://github.com/UCL/STIR/issues/1532">Issue #1532</a> for more detail. Fixed by using averaging functionality of SSRB instead of adding segments for attenuation correction factors.
            <a href=https://github.com/UCL/STIR/pull/1531>PR #1531</a>
        </li>
    </ul>

<h3>Build system</h3>
<ul>
  <li>Enable more diagnostics in CMake when finding CERN's ROOT (we used to silence them)<br>
    <a href=https://github.com/UCL/STIR/pull/1552>PR #1552</a>
  </li>
</ul>

<h3>Known problems</h3>
    <p>See <a href=https://github.com/UCL/STIR/labels/bug>our issue tracker</a>.</p>


<H2>What is new for developers (aside from what should be obvious from the above):</H2>

<h3>New functionality</h3>

<li>
  <code>ProjDataInMemory</code> <code>read_from_file</code> method now returns a <code>ProjDataInMemory</code> object.
</li>

<h3>Changed functionality</h3>
<ul>
  <li>
    Made 2 (deprecated) members of <code>ProjDataInfoBlocksOnCylindricalNoArcCorr</code> <code>private</code>
    and do some clean-up of which files to include.
    <br>
    <a href="https://github.com/UCL/STIR/pull/1556">PR #1556</a>
  </li>
</ul>

<h3>Bug fixes</h3>
<ul>
  <li>Fixed minor incompatibility with gcc-14 and clang-18 buy adding an extra include file<br>
    <a href=https://github.com/UCL/STIR/pull/1552>PR #1552</a>
  </li>
</ul>

<h3>Other code changes</h3>


<h3>Test changes</h3>


<h4>C++ tests</h4>


<h4>recon_test_pack</h4>

</body>

</html>
