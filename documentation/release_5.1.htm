<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Summary of changes in STIR release 5.1</title>
  </head>

  <body>
    <h1>Summary of changes in STIR release 5.1</h1>

<p>This version is 100% backwards compatible with STIR 5.0.
</p>
<h2>Overall summary</h2>
<p>
<ul>
  <li>Improvements to listmode reconstruction by Nikos Efthimiou, see <a href="https://github.com/UCL/STIR/pull/1030/">PR #1030</a>. 
  </li>    
  <li>Support for PENNPET Explorer listmode data (if proprietary libraries are found) by Nikos Efthimiou, see <a href="https://github.com/UCL/STIR/pull/1028/">PR #1028</a>. 
  </li> 
  <li>Scatter simulation, estimation and down/up-sampling adapted for scanner with Block geometry by Daniel Deidda. 
  </li>    

</ul>
</p>

<p>Of course, there is also the usual code-cleanup and 
improvements to the documentation.
</p>

<p>This release contains mainly code written by Nikos Eftimiou (UPenn and MGH), with support by Kris Thielemans (UCL).
  Additional changes to penalty functions were made by Robert Twyman (UCL). Scatter estimation for BlocksOnCylindrical by Daniel Deidda (NPL) and Kris Thielemans (UCL). Various small changes to add functionality to Python interface by Markus Jehl (Positrigo).
</p>

<h2>Patch release info</h2>
<ul>
  <li> 5.1.0 released ??/05/2022</li>    
</ul>

<h2> Summary for end users (also to be read by developers)</h2>

<h3>Bug fixes</h3>
<ul>
  <li>Fix of <code>find_LOR_intersections_with_cylinder</code> functions in the LOR hierarchy. This fixes the use of the <tt>parallelproj</tt> projector for non-cylindrical geometries. See <a href="https://github.com/UCL/STIR/pull/1072/">PR #1072</a>.
  </li>
</ul>

<h3>New functionality</h3>
<ul>
  <li>Improvements to listmode reconstruction by Nikos Efthimiou, see <a href="https://github.com/UCL/STIR/pull/1030/">PR #1030</a>. 
  </li>    
  <li>Support for PENNPET Explorer listmode data (if proprietary libraries are found) by Nikos Efthimiou, see <a href="https://github.com/UCL/STIR/pull/1028/">PR #1028</a>. 
  </li>    
  <li> Improvements to penalty functions including Hessian methods, see <a href="https://github.com/UCL/STIR/pull/901/">PR #901</a>.
  </li>
  <li>Added <code>write_to_file(fname)</code> method to python <code>VoxelsOnCartesianGrid</code> objects and updated <code>recon_demo.py</code> as a demonstration.
  </li>
  <li>Added a constructor to <code>CListModeDataSAFIR</code> to read data programmatically.
  </li>
  <li>Added the option to set output proj data on <code>LmToProjData</code> to read data programmatically.
      This will fill the proj data object only with the listmode data in the last frame that is defined.
  </li>
  <li>Added the option to set the radius on <code>TruncateToCylindricalFOVImageProcessor</code>.
  </li>
  <li>Filtering out coincidences in the same detector number of different rings. These were previously
      all added to the central bin of the first view, if not removed from the listmode file prior to reading.
  </li>
  <li>Added the option to set slope and intercepts on <code>HUToMuImageProcessor</code> programmatically,
      to not have to rely on JSON.
  </li>
</ul>


<h3>Changed functionality</h3>


<h3>Build system</h3>
    <li>
      ROOT versions until v6.24 supported C++11, subsequent versions require at least C++14.
      If ROOT v6.24 or later is detected, STIR will now use a minimum of C++14,
      see <a href="https://github.com/UCL/STIR/pull/1068/">PR #1068</a>.
    </li>


<h3>Known problems</h3>
See <a href=https://github.com/UCL/STIR/labels/bug>our issue tracker</a>.

<h3>Minor bug fixes</h3>
<ul>
  <li>made <code>ProjDataInfo*::get_all_det_pos_pairs_for_bin</code> thread-safe.
   See <a href="https://github.com/UCL/STIR/pull/1084/">PR #1084</a>.</li></li>
</ul>

<h3>Documentation changes</h3>

<h3>recon_test_pack changes</h3>

<h3>Other changes to tests</h3>
  <li> Significant changes made to <code>test_priors</code> that tests the Hessian's convexity, given
    <code>x(Hx) > 0</code>, and a perturbation response, using gradients, was added to determine the Hessian
    (for a single densel) is within tolerance.
    Tests the Quadratic, Relative Difference (in two configurations) and Log-Cosh Penalties (Robert Twyman, UCL).
  </li>

</body>

</html>
